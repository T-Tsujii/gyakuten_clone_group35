<div class="text-center">
  <h1>テキスト教材</h1>
</div>

<form class="my-3 mx-auto">
  <%= search_form_for @q, url: root_path do |f| %>
    <%= f.search_field :title_cont, placeholder: "タイトル検索" %>
    <%= f.search_field :genre_cont, placeholder: "ジャンル検索" %>
    <%= f.submit "検索" %>
  <% end %>
</form>

<div class="row">
  <% @texts.each do |text| %>
    <div class="col-12 col-md-6 col-lg-4 text-card-container">
      <div class="card content-card border-dark mb-3">
        <%= link_to text_path(text), target: :_blank do %>
          <div class="card-header p-0">
            <%= image_tag "no_image.jpg", loading: "lazy", alt: text.title, class: "img-fluid" %>
          </div>
          <div class="card-body text-dark text-card-body">
            <% if text.readed_by?(current_user) %>
              <%= link_to "読破済みを解除", text_readed_texts_path(text.id),
                method: :delete, class: "btn btn-secondary btn-block" %>
            <% else %>
              <%= link_to "読破済みにする", text_readed_texts_path(text.id),
                method: :post, class: "btn btn-primary btn-block" %>
            <% end %>
            <p class="text-title"><%= text.title %></p>
            <p class="text-subtitle">【<%= text.genre %>】</p>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
